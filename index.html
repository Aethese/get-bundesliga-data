<!DOCTYPE html>
<html>
	<head>
		<title>Get Bundesliga Data</title>
		<link href='style.css' rel='stylesheet'>
		<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js'></script>
	</head>
	<body>
		<h1>Get Bundesliga 1 Data (Saison 2023/2024)</h1>

		<form>Select your team:
			<select name='selectTeam' id='selectTeam'>
				<option>None</option>
				<option>Augsburg</option>
				<option>Bayern</option>
				<option>Bochum</option>
				<option>Bremen</option>
				<option>Darmstadt</option>
				<option>Dortmund</option>
				<option>Frankfurt</option>
				<option>Freiburg</option>
				<option>Gladbach</option>
				<option>Heidenheim</option>
				<option>Hoffenheim</option>
				<option>KÃ¶ln</option>
				<option>Leipzig</option>
				<option>Leverkusen</option>
				<option>Mainz</option>
				<option>Stuttgart</option>
				<option>Union Berlin</option>
				<option>Wolfsburg</option>
			</select>
		</form>
		<h3 id='selectedT'>Your selected team is: None</h3>

		<!-- options added with js -->
		<form style='margin-top:40px;' id='selectGameText' class='hidden'>Select which game you want to get info on:
			<select name='selectGame', id='selectGame'></select>
		</form>
		<h3 id='selectedG' class='hidden'>Your selected game is: 0</h3>

		<table id='dataTable' class='hidden'>
			<tr> <!-- header -->
				<th>Spielt</th>
				<th>Datum (JAHR/MM/TT)</th>
				<th>Gegner</th>
				<th class='text-center'>Ergebnis</th>
				<th class='text-center'>G | U | V</th>
				<th class='text-center'>Tore</th>
				<th class='text-center'>Diff.</th>
				<th class='text-center'>Punkte</th>
				<th style='text-align: right;'>Platz</th>
			</tr>
			<tr> <!-- actual data -->
				<th id='spielt'>0</th>
				<th id='datum'>2023/01/01</th>
				<th id='gegner'>Wolfsburg</th>
				<th id='ergebnis' class='text-center'>0-0</th>
				<th id='guv' class='text-center'>0 | 0 | 0</th>
				<th id='tore' class='text-center'>0-0</th>
				<th id='diff' class='text-center'>+0</th>
				<th id='punkte' class='text-center'>0</th>
				<th id='platz' style='text-align: right;'>0</th>
			</tr>
		</table>

		<!-- handles changing text below forms -->
		<script type='text/javascript'>
			/*
				sorry for the mess. this script handles changing text
				based on user input, showing text after user selects their
				team, and handles all of the table changes :p
			*/

			// change for 'Your selected team is'
			document
			.getElementById('selectTeam')
			.addEventListener('change', function () {
				'use scrict';
				// first change the 'your selected team' text to match
				// what team they picked. after that show the text that
				// allows them to pick their team
				let sel = document.getElementById('selectTeam');
				let value = sel.options[sel.selectedIndex].text;
				let text = 'Your selected team is: ' + value;

				document.getElementById('selectedT').textContent = text;

				// show the 'your selected game' text
				document.getElementById('selectGameText').classList.remove('hidden'); // text
				document.getElementById('selectedG').classList.remove('hidden');      // info text

			});

			// change for 'Your selected game is'
			document
			.getElementById('selectGame')
			.addEventListener('change', function () {
				'use scrict';
				// Order:
				//	First: Update 'selected game is' text
				//	Second: Update the table by calling updateTable() in get_data
				let sel = document.getElementById('selectGame');
				let value = sel.options[sel.selectedIndex].text;
				let text = 'Your selected game is: ' + value;

				document.getElementById('selectedG').textContent = text;

				// update the table
				let table = document.getElementById('dataTable');
				table.classList.add('hidden');
				let selectTeam = document.getElementById('selectTeam');
				let team = selectTeam.options[selectTeam.selectedIndex].text;
				let game = parseInt(value);
				updateTable(team, game);
			});
		</script>

		<!-- adds all of the options for 'selectedG' -->
		<script type='text/javascript'>
			// Add amount of available games to the selectGame list
			let min = 0;
			let max = 34;
			let element = document.getElementById('selectGame');

			for (let i = min; i<=max; i++)
			{
				let option = document.createElement('option');
				option.value = i;
				option.text = i;
				element.appendChild(option);
			}
		</script>
		<script src='get_data.js'></script>
	</body>
</html>